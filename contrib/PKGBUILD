# Copyright (C) 2010-2014 Antti Ajanki
# Maintainer: Aleksi Venäläinen <hotwheelx@gmail.com>

pkgname=yle-dl
pkgver=2.1.0
pkgrel=10
pkgdesc="yle-dl"
arch=('i686' 'x86_64')
url="http://aajanki.github.io/yle-dl/"
_root="git://github.com/aajanki/yle-dl"
license=('GPLv2')
depends=(python python2 rtmpdump pycrypto)
makedepends=(git)
checkdepends=(python python2 rtmpdump pycrypto)
provides=()
replaces=(yle-dl)
changelog=
source=(${pkgname}.tar.gz::https://github.com/aajanki/yle-dl/tarball/master)
md5sums=('SKIP')


build() {
  cd "$srcdir"

  if [ -d ${pkgname} ] ; then
    (cd ${pkgname} && git pull origin) || warning "Git pull failed!"
  else
    git clone $_root ${pkgname}
  fi

  rm -rf ${pkgname}-build
  git clone "$srcdir/${pkgname}" ${pkgname}-build
  cd ${pkgname}-build

  make
}

package() {
	cd "$srcdir/${pkgname}-build"
	make DESTDIR="$pkgdir/" install
}
